// Generated by CoffeeScript 1.6.3
(function() {
  var FriendsClass, ListController, LocationService, ajaxGet, app;

  FriendsClass = function() {
    this.list = [];
    return this.demo = function() {
      return this.list = [
        {
          name: "Adam",
          location: "37.47,-122.25"
        }, {
          name: "bob",
          location: "San Francisco"
        }
      ];
    };
  };

  LocationService = function() {
    return this.current_location = "Current+Location";
  };

  ListController = function($scope, $http, Friends, Location) {
    var pull, ua, _ref;
    $scope.friends = Friends;
    $scope.location = Location;
    ua = navigator.userAgent.toLowerCase();
    $scope.ios = ua.match(/(ipad|iphone);.*cpu.*os 7_\d/i);
    if ((_ref = navigator.geolocation) != null) {
      _ref.getCurrentPosition(function(position) {
        Location.current_location = position.coords.latitude.toString() + "," + position.coords.longitude.toString();
        return $scope.$digest();
      });
    }
    pull = function() {
      var p;
      p = {
        method: 'GET',
        url: "../list",
        cache: false
      };
      return $http(p).success(function(data) {
        return Friends.list = data;
      }).error(function() {
        return console.log(arguments);
      });
    };
    return pull();
  };

  app = angular.module('pickmeup', [], function($compileProvider) {
    return $compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|maps):/);
  });

  ajaxGet = function() {};

  app.filter('escape', function() {
    return window.escape;
  });

  app.service('Friends', FriendsClass);

  app.service('Location', LocationService);

  app.controller('ListController', ListController);

}).call(this);

/*
//@ sourceMappingURL=controller.map
*/
